# アプリ要件定義書（プロダクト仕様）
「なぜできなかったのか」

## 1. アプリ概要

### 1.1 コンセプト
本アプリは、習慣化や自己改善のための一般的な“まじめな”アプリとは異なり、
**「できなかった理由を愛でる」** という独自のアプローチを持つ。

- できなかった日だけ記録を残す  
- その日の「言い訳」を書く／選ぶ  
- できた日は記録を残さない（＝軽い成功体験）

目的は、ユーザーが「できない自分」を責めずに、むしろ楽しみながら継続できる環境を提供すること。

---

## 2. ターゲットユーザー

- 習慣化アプリが続かない人  
- まじめなToDo管理に疲れた人  
- シュールな世界観が好きな人  
- SNSで面白い表現を共有したい層  
- ゆるい自己管理を望むライトユーザー  

---

## 3. 使用シーン（ユーザーストーリー）

### 3.1 初回利用
- チュートリアルでアプリのコンセプトを理解
- 初回Goal（目標）を設定
- 通知を設定
- ホームで今日のカード＋過去ログを確認

### 3.2 言い訳の記録
- 通知からアプリを開き、今日の言い訳を記録
- テンプレ or 自由記述
- 保存するとホームの今日カードが更新

### 3.3 振り返り
- 過去の言い訳一覧をスクロールして楽しむ
- 必要に応じて編集・削除も可能

### 3.4 Goal追加
- 新しい習慣を思いついたらGoalを追加
- 横スクロールカードでGoal切替

---

## 4. 提供価値（Outcome）

- 「できなかった自分」を肯定できる  
- 言い訳を書くこと自体が楽しい体験になる  
- 振り返りがポジティブに作用  
- SNSで文化的に広がる可能性  
- 継続率が上がる（心理的負担が低いため）

---

## 5. 機能要件

### 5.1 Goal管理
- Goal作成・編集・削除
- 複数Goalを保持
- 通知設定（時間指定/ON/OFF）
- Goalカード横スクロールUIで切替

### 5.2 今日の言い訳記録
- 言い訳入力
- テンプレ言い訳選択
- 記録済みの言い訳は編集可能
- 削除可能（→その日は成功扱いへ戻る）

### 5.3 過去ログ表示
- 今日のカード下にExcuseEntry一覧を表示
- 日付降順
- タップで編集画面へ遷移

### 5.4 通知
- Goal単位で設定
- 通知タップで該当GoalのTodayカードへ遷移

### 5.5 テンプレ言い訳
- サーバーからテンプレ一覧取得
- クライアントでランダム表示など可能

---

## 6. 非機能要件

### 6.1 パフォーマンス
- CRUD操作は200ms以内を目標

### 6.2 スケーラビリティ
- 初期は小規模DBで十分（SQLite/Postgres）
- 将来的な水平分割に対応できるスキーマ運用

### 6.3 ログ
- 各操作を構造化ログで記録  
- userId, endpoint, statusCode, latency など

### 6.4 セキュリティ
- Authorization必須
- 全データアクセスはuserId境界で制御

---

## 7. UI概要

### 7.1 ホーム：Goal Workspace
#### 上部：Goalカードスワイプ
- 横スクロール
- 選択中のGoalを強調

#### 中央：今日のカード（3状態）
- 未記入 / 言い訳あり / 成功扱い

#### 下部：過去ログ一覧
- ExcuseEntryを日付降順で表示

---

### 7.2 言い訳記入画面（Excuse Picker）
- テンプレ一覧
- 自由入力
- 保存ボタン

---

### 7.3 Goal追加画面
- Goalタイトル（長文OK）
- おすすめ目標チップ
- 通知設定

---

## 8. データモデル概要

### Goal
- ユーザーの習慣目標
- 並び順と通知設定を保持

### ExcuseEntry
- 「できなかった日」だけ保存
- Goal × date でユニーク

### ExcuseTemplate
- 固定またはDB管理のテンプレ文

---

## 9. サーバーとクライアントの責務分界

### サーバー側
- 永続化
- Goal / ExcuseEntryのCRUD
- テンプレ配信
- 認証ユーザー境界管理

### クライアント側
- 日付の締め時間ロジック（例：4:00AM）
- 今日の状態判定
- 通知設定
- UIレンダリング・アニメーション

---

## 10. 拡張可能性

- Goalのメモやタグ
- ExcuseEntryにカテゴリ追加
- SNSシェア画像生成
- 日付区切り時間のユーザー設定
- Goalアーカイブ機能

---

本ドキュメントはプロダクトの全体像を示し、  
バックエンド実装やUIプロトタイプ実装の土台となる仕様である。
